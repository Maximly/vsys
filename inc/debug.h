/*++

Abstract:

    Debugging support

Revision History:

    26/05/2023 - Maxim Lyadvinsky - Created

--*/
#pragma once

#ifdef VSYS_DBG

////////////////////////////////////////////////////////////////////////////////
//  Debug print
//      Usage: DbgPrint(("Message", format args))
////////////////////////////////////////////////////////////////////////////////
#define DbgPrint(_x_) _DbgPrint _x_


////////////////////////////////////////////////////////////////////////////////
//  Add dbg messages prefix
////////////////////////////////////////////////////////////////////////////////
#define DbgSetPref(_x_) _DbgSetPref _x_


////////////////////////////////////////////////////////////////////////////////
//  Debug print w/o prefix
////////////////////////////////////////////////////////////////////////////////
#define DbgPrintRaw(_x_) _DbgPrintRaw _x_


////////////////////////////////////////////////////////////////////////////////
//  Debug print stubs
////////////////////////////////////////////////////////////////////////////////
void _DbgPrint(const char* p, ...);
void _DbgSetPref(const char* p, ...);
void _DbgPrintRaw(const char* p, ...);


////////////////////////////////////////////////////////////////////////////////
//  Define DBG for compliance with Windows UMDF
////////////////////////////////////////////////////////////////////////////////
#if defined VSYS_USER && defined VSYS_WIN
#ifndef DBG
#define DBG
#endif // DBG
#endif // VSYS_USER && VSYS_WIN

#else

////////////////////////////////////////////////////////////////////////////////
//  Nothing is printed in release build
////////////////////////////////////////////////////////////////////////////////
#define DbgPrint(_x_) ((void)0)
#define DbgPrintPref(_x_) ((void)0)
#define DbgSetPref(_x_) ((void)0)
inline void DbgPrintBin(const void*, int, bool = false) {}
#define InitGdiChecker() ((void)0)
#define DoneGdiChecker() ((void)0)

#endif // VSYS_DBG
